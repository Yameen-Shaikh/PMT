(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(76)},33:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),i=(n(33),n(2)),s=n(3),l=n(5),u=n(4),m=n(6),p=n(81),h=n(83),b=n(78),d=n(80),f=n(82),g=n(8),O=n.n(g),j=Object(a.createContext)(),v=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).setToken=function(e){e&&e.length&&n.setState({loggedIn:!0,token:e},function(){return n.saveToken()})},n.saveToken=function(){localStorage.setItem("session",JSON.stringify({token:n.state.token}))},n.changeLoginState=function(e){return new Promise(function(t){n.setState({loggedIn:e},t)})},n.invalidLogin=function(){return r.a.createElement(d.a,{to:"/login"})};var a=localStorage.getItem("session");if(a){var c;c=JSON.parse(a),n.state={loggedIn:!!c.token.length,token:c.token},n.saveToken()}else n.state={loggedIn:!1,token:""};return O.a.interceptors.request.use(function(e){return e.headers.AUTH=n.state.token,e}),O.a.interceptors.response.use(function(e){return 2===e.error&&console.log("/login"),e}),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(j.Provider,{value:{loggedIn:this.state.loggedIn,changeLoginState:this.changeLoginState,invalidLogin:this.invalidLogin,setToken:this.setToken}},this.props.children)}}]),t}(a.Component);v=Object(f.a)(v);var E=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.context.loggedIn?r.a.createElement(b.a,this.props):this.context.invalidLogin()}}]),t}(a.Component);E.contextType=j;var y=n(13),k=(n(56),n(58),n(17));n(60);function N(e){var t="",n="",a="",c="";e.color&&(t=" btn-"+e.color),e.variant&&(n=" btn-"+e.variant),e.size&&(a=" btn-"+e.size),e.className&&(c+=" "+e.className);var o=Object(k.a)({},e);return delete o.color,delete o.variant,delete o.size,delete o.className,r.a.createElement("button",Object.assign({},o,{className:"cui btn"+t+n+a+c}),e.children)}n(62);var w=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).change=function(e){return function(t){var a=t.target.value;n.setState({value:a}),e&&e(a)}},n.state={value:n.props.defaultValue,onChange:n.change(n.props.triggerOnChange?n.props.watcher:function(){}),onBlur:n.change(n.props.triggerOnChange?function(){}:n.props.watcher)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.error?" error":"";return r.a.createElement("label",{className:"custom-input"+e},r.a.createElement("input",Object.assign({},this.state,{disabled:!!this.props.disabled,type:this.props.type||"text"})),r.a.createElement("div",{className:"label"},this.props.label),r.a.createElement("div",{className:"error-message"},this.props.errorMessage))}}]),t}(a.Component);n(64);n(66);var C,S=O.a.CancelToken,T=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",error:!1,loading:!1},n.changeWatcher=function(e){return function(t){n.setState(Object(y.a)(Object(y.a)({},e,t),"error",!1))}},n.submit=function(e){e&&e.preventDefault(),n.setState({loading:!0}),C=S.source(),O.a.post("login",{username:n.state.username,password:n.state.password},{cancelToken:C.token}).then(function(e){var t=e.data;t.error?n.setState({loading:!1,error:!0}):(n.context.setToken(t.token),n.setState({loading:!1}),n.props.history.push("/"))}).catch(function(e){O.a.isCancel(e)?console.log(e.message):console.log(e)})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){C=S.source()}},{key:"componentWillUnmount",value:function(){C.cancel("Operation cancelled by user")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"header"},"Sign In"),r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(w,{label:"username",type:"text",defaultValue:"",error:this.state.error,errorMessage:"invalid username or password",triggerOnChange:!0,watcher:this.changeWatcher("username")}),r.a.createElement(w,{label:"password",type:"password",defaultValue:"",error:this.state.error,errorMessage:"invalid username or password",triggerOnChange:!0,watcher:this.changeWatcher("password")}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(N,{disabled:this.state.loading,size:"small",type:"submit",color:"info",onClick:this.submit},"Sign in")),r.a.createElement("div",{style:{fontSize:"0.9em",marginTop:"20px",marginBottom:"5px"}},"Don't have an account ?"," ",r.a.createElement(N,{className:"no-margin",size:"smaller",color:"info",variant:"flat",onClick:function(){return e.props.history.push("/register")}},"Sign up"))))}}]),t}(a.Component);T.contextType=j;var x,I=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"project"},this.props.name)}}]),t}(a.Component),L=O.a.CancelToken,W=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={projects:[],loading:!0},n.fetch=function(){n.setState({loading:!0}),x=L.source(),O.a.post("/list_projects",{},{cancelToken:x.token}).then(function(e){var t=e.data.projects;n.setState({projects:t,loading:!1})}).catch(function(e){O.a.isCancel(e)?console.log(e.message):console.error(e)})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){x.cancel("operation cancelled by the user")}},{key:"componentWillMount",value:function(){this.fetch()}},{key:"render",value:function(){var e=this.state.projects.map(function(e){return r.a.createElement(I,Object.assign({},e,{key:e._id}))});return r.a.createElement("div",{className:"projects"},e)}}]),t}(a.Component),z=n(79),A=(n(68),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement("li",{className:"list-item"},r.a.createElement("i",{className:"material-icons"},"home")),r.a.createElement(z.a,{className:"list-item",to:"/editor"},r.a.createElement("i",{className:"material-icons"},"edit")),r.a.createElement("li",{className:"list-item"},r.a.createElement("i",{className:"material-icons"},"account_circle")),r.a.createElement("li",{className:"list-item"},r.a.createElement("i",{className:"material-icons"},"settings")))}}]),t}(a.Component)),B=(n(70),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"dashboard-container"},r.a.createElement(A,null),r.a.createElement("div",{className:"content"},r.a.createElement(W,null)))}}]),t}(a.Component)),M=n(19),J=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return"Project structure component here."}}]),t}(a.Component),U=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return"EditorSettings here"}}]),t}(a.Component),D=(n(72),function(e){var t=e.icon,n=(e.tooltip,e.onClick),a=e.tid,c=e.current;return r.a.createElement("li",{className:"editor-sidebar-tab"+(c===a?" active":""),onClick:function(){return n(a)}},r.a.createElement("i",{className:"fa fa-"+t}))}),P=function(e){var t=e.fortab,n=e.current,a=e.component;return console.log(t===n),t===n?a:null},V=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={current:"structure",panelOpen:!1},n.setTab=function(e){n.setState({current:e})},n.toggleTabBody=function(){n.setState(function(e){return{panelOpen:!e.panelOpen}})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=function(t){var n=Object(M.a)({},t);return r.a.createElement(D,Object.assign({},n,{current:e.state.current,onClick:e.setTab}))},n=function(t){var n=Object(M.a)({},t);return r.a.createElement(P,Object.assign({},n,{current:e.state.current}))};return r.a.createElement("div",{className:"editor-sidebar"+(this.state.panelOpen?" active":"")},r.a.createElement("div",{className:"sidebar-headers"},r.a.createElement(D,{tid:"minimise",icon:this.state.panelOpen?"arrow-left":"arrow-right",onClick:this.toggleTabBody}),r.a.createElement(t,{tid:"structure",icon:"folder"}),r.a.createElement(t,{tid:"settings",icon:"edit"})),r.a.createElement("div",{className:"sidebar-tab-body"},r.a.createElement(n,{fortab:"structure",component:r.a.createElement(J,null)}),r.a.createElement(n,{fortab:"settings",component:r.a.createElement(U,null)})))}}]),t}(a.Component),_=(n(74),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"editor-component"},r.a.createElement(V,null),"I'm the Editor component")}}]),t}(a.Component)),q=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement(h.a,null,r.a.createElement(b.a,{path:"/login",component:T}),r.a.createElement(E,{path:"/editor",component:_}),r.a.createElement(E,{path:"/",component:B})))}}]),t}(a.Component),H=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(q,null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));O.a.defaults.baseURL="api/",o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.17f1ac3d.chunk.js.map